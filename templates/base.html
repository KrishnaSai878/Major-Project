<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ====== META ====== -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="csrf-token" content="{{ csrf_token() }}">
  <title>{% block title %}NGO Connect Platform{% endblock %}</title>

  <!-- ====== FONTS & ICONS ====== -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">

  <!-- ====== TAILWIND ====== -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ====== CUSTOM STYLES ====== -->
  <link href="{{ url_for('static', filename='css/vendor/design.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/app.css') }}" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">

  {% block extra_head %}{% endblock %}

  <style>
    :root {
      --brand-primary: #6d28d9;
      --brand-accent: #FF0090;
      --ink-900: #0f172a;
      --ink-700: #334155;
      --surface: #ffffff;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: var(--ink-700);
      background-color: #f9fafb;
    }

    /* === NAVBAR === */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 50;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid #e5e7eb;
      transition: all 0.3s ease;
    }

    .nav-container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0.75rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      color: var(--brand-accent);
      font-weight: 700;
      font-size: 1.75rem;
      text-decoration: none;
      letter-spacing: -0.02em;
    }

    .nav-menu {
      display: flex;
      align-items: center;
      gap: 2rem;
      list-style: none;
    }

    .nav-menu a {
      color: #1f2937;
      font-weight: 500;
      text-decoration: none;
      transition: color 0.25s;
    }

    .nav-menu a:hover {
      color: var(--brand-primary);
    }

    /* Dropdown */
    .nav-item {
      position: relative;
    }

    .nav-item ul {
      display: none;
      position: absolute;
      background: #fff;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.1);
      border-radius: 0.5rem;
      top: 2.5rem;
      left: 0;
      min-width: 180px;
      z-index: 40;
      padding: 0.5rem 0;
    }

    .nav-item:hover ul {
      display: block;
    }

    .nav-item ul a {
      display: block;
      padding: 0.5rem 1rem;
      color: #374151;
    }

    .nav-item ul a:hover {
      background: #f9fafb;
      color: var(--brand-primary);
    }

    /* Mobile nav */
    #navToggle {
      display: none;
      border: none;
      background: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      #navToggle {
        display: inline-block;
      }

      .nav-menu {
        display: none;
        flex-direction: column;
        background: white;
        width: 100%;
        position: absolute;
        top: 100%;
        left: 0;
        padding: 1rem 0;
        border-top: 1px solid #e5e7eb;
      }

      .nav-menu.open {
        display: flex;
      }

      .nav-item ul {
        position: static;
        box-shadow: none;
      }
    }

    /* === FOOTER === */
    .footer {
      background: #1f2937;
      color: #e5e7eb;
      padding: 4rem 2rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }

    .footer h3 {
      color: var(--brand-accent);
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .footer a {
      color: #cbd5e0;
      text-decoration: none;
      display: block;
      margin-bottom: 0.5rem;
      transition: color 0.25s;
    }

    .footer a:hover {
      color: #fff;
    }

    .footer-bottom {
      text-align: center;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 2rem;
      padding-top: 1rem;
      font-size: 0.875rem;
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body class="min-h-screen flex flex-col">

  <!-- ====== NAVBAR ====== -->
  <nav class="navbar" role="navigation" aria-label="Main Navigation">
    <div class="nav-container">
      <a href="{{ url_for('index') }}" class="logo">NGO Connect</a>

      <button id="navToggle" aria-label="Toggle navigation">
        <i class="fa-solid fa-bars text-2xl text-gray-700"></i>
      </button>

      <ul id="mainNav" class="nav-menu">
        <li><a href="{{ url_for('index') }}">Home</a></li>
        <li><a href="{{ url_for('ngos_directory') }}">NGOs</a></li>

        <li><a href="{{ url_for('volunteers_leaderboard') }}">Leaderboard</a></li>
        <li><a href="{{ url_for('about') }}">About</a></li>

        {% if current_user.is_authenticated %}
          <li><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
          <li><a href="{{ url_for('logout') }}">Logout</a></li>
        {% else %}
          <li><a href="{{ url_for('login') }}">Login</a></li>
          <li>
            <a href="{{ url_for('register') }}" class="bg-[#FF0090] hover:bg-[#E0007D] text-white font-medium px-6 py-2 rounded-full shadow transition">
              Register
            </a>
          </li>
        {% endif %}

        <li class="nav-item">
          <button class="flex items-center gap-1 text-gray-700 focus:outline-none">
            <i class="fa-solid fa-globe"></i> EN <i class="fa-solid fa-chevron-down text-xs"></i>
          </button>
          <ul class="right-0">
            <li><a href="#">English</a></li>
            <li><a href="#">Spanish</a></li>
            <li><a href="#">French</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <!-- ====== MAIN CONTENT ====== -->
  <main class="flex-1 pt-24">
    <div id="toastContainer" data-flashes='{{ get_flashed_messages(with_categories=true) | tojson | safe }}'></div>
    {% block content %}{% endblock %}
  </main>

  <!-- ====== FOOTER ====== -->
  <footer class="footer">
    <div class="footer-content">
      <div>
        <h3>NGO Connect</h3>
        <p class="text-sm text-gray-300">
          Connecting NGOs, volunteers, and donors to build a more compassionate world.
        </p>
      </div>
      <div>
        <h3>Quick Links</h3>
        <a href="{{ url_for('index') }}">Home</a>
        <a href="{{ url_for('register') }}">Register</a>
        <a href="{{ url_for('login') }}">Login</a>
      </div>
      <div>
        <h3>Contact</h3>
        <a href="mailto:info@ngoconnect.com">info@ngoconnect.com</a>
        <a href="tel:+1234567890">+1 (234) 567-890</a>
      </div>
    </div>
    <div class="footer-bottom">
      © {{ current_year or 2025 }} NGO Connect — All Rights Reserved.
    </div>
  </footer>

  <!-- ====== SCRIPTS ====== -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js" defer></script>
  <script src="{{ url_for('static', filename='js/app.js') }}" defer></script>

  <script>
    // Mobile Nav Toggle
    const navToggle = document.getElementById('navToggle');
    const mainNav = document.getElementById('mainNav');
    if (navToggle) {
      navToggle.addEventListener('click', () => {
        mainNav.classList.toggle('open');
      });
    }
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>
